- hosts:
  - localhost
  tasks:
  - name: pull latest images
    docker_image:
      name: "{{ item }}"
    with_items:
    - transprouter/dns
    - transprouter/nginx
    - transprouter/openssh
    - transprouter/proxy
    - transprouter/workstation

  - include_tasks: acceptance-infra/networks.yml
  - include_tasks: acceptance-infra/public_services.yml
  - include_tasks: acceptance-infra/private_services.yml
  - include_tasks: acceptance-infra/publish_dns.yml

  - name: deploy transprouter
    command: docker cp ../transprouter transprouter_priv_ws:/opt/transprouter/new
